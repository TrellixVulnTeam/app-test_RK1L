{"remainingRequest":"/home/vkit3/WebstormProjects/vue-test/node_modules/babel-loader/lib/index.js!/home/vkit3/WebstormProjects/vue-test/node_modules/ts-loader/index.js??ref--14-2!/home/vkit3/WebstormProjects/vue-test/node_modules/eslint-loader/index.js??ref--13-0!/home/vkit3/WebstormProjects/vue-test/src/store/auth.module.ts","dependencies":[{"path":"/home/vkit3/WebstormProjects/vue-test/src/store/auth.module.ts","mtime":1618503759000},{"path":"/home/vkit3/WebstormProjects/vue-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vkit3/WebstormProjects/vue-test/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vkit3/WebstormProjects/vue-test/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/vkit3/WebstormProjects/vue-test/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEFwaVNlcnZpY2UgZnJvbSAiQC9jb21tb24vYXBpLnNlcnZpY2UiOwppbXBvcnQgSnd0U2VydmljZSBmcm9tICJAL2NvbW1vbi9qd3Quc2VydmljZSI7CmltcG9ydCB7IExPR0lOLCBMT0dPVVQsIFJFR0lTVEVSLCBDSEVDS19BVVRILCBVUERBVEVfVVNFUiB9IGZyb20gIi4vYWN0aW9ucy50eXBlIjsKaW1wb3J0IHsgU0VUX0FVVEgsIFBVUkdFX0FVVEgsIFNFVF9FUlJPUiB9IGZyb20gIi4vbXV0YXRpb25zLnR5cGUiOwpjb25zdCBzdGF0ZSA9IHsKICBlcnJvcnM6IG51bGwsCiAgdXNlcjoge30sCiAgaXNBdXRoZW50aWNhdGVkOiAhIUp3dFNlcnZpY2UuZ2V0VG9rZW4oKQp9Owpjb25zdCBnZXR0ZXJzID0gewogIGN1cnJlbnRVc2VyKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUudXNlcjsKICB9LAoKICBpc0F1dGhlbnRpY2F0ZWQoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5pc0F1dGhlbnRpY2F0ZWQ7CiAgfQoKfTsKY29uc3QgYWN0aW9ucyA9IHsKICBbTE9HSU5dKGNvbnRleHQsIGNyZWRlbnRpYWxzKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgIEFwaVNlcnZpY2UucG9zdCgidXNlcnMvbG9naW4iLCB7CiAgICAgICAgdXNlcjogY3JlZGVudGlhbHMKICAgICAgfSkudGhlbigoewogICAgICAgIGRhdGEKICAgICAgfSkgPT4gewogICAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9BVVRILCBkYXRhLnVzZXIpOwogICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgIH0pLmNhdGNoKCh7CiAgICAgICAgcmVzcG9uc2UKICAgICAgfSkgPT4gewogICAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9FUlJPUiwgcmVzcG9uc2UuZGF0YS5lcnJvcnMpOwogICAgICB9KTsKICAgIH0pOwogIH0sCgogIFtMT0dPVVRdKGNvbnRleHQpIHsKICAgIGNvbnRleHQuY29tbWl0KFBVUkdFX0FVVEgpOwogIH0sCgogIFtSRUdJU1RFUl0oY29udGV4dCwgY3JlZGVudGlhbHMpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIEFwaVNlcnZpY2UucG9zdCgidXNlcnMiLCB7CiAgICAgICAgdXNlcjogY3JlZGVudGlhbHMKICAgICAgfSkudGhlbigoewogICAgICAgIGRhdGEKICAgICAgfSkgPT4gewogICAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9BVVRILCBkYXRhLnVzZXIpOwogICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgIH0pLmNhdGNoKCh7CiAgICAgICAgcmVzcG9uc2UKICAgICAgfSkgPT4gewogICAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9FUlJPUiwgcmVzcG9uc2UuZGF0YS5lcnJvcnMpOwogICAgICAgIHJlamVjdChyZXNwb25zZSk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKCiAgW0NIRUNLX0FVVEhdKGNvbnRleHQpIHsKICAgIGlmIChKd3RTZXJ2aWNlLmdldFRva2VuKCkpIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UuZ2V0KCJ1c2VyIikudGhlbigoewogICAgICAgIGRhdGEKICAgICAgfSkgPT4gewogICAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9BVVRILCBkYXRhLnVzZXIpOwogICAgICB9KS5jYXRjaCgoewogICAgICAgIHJlc3BvbnNlCiAgICAgIH0pID0+IHsKICAgICAgICBjb250ZXh0LmNvbW1pdChTRVRfRVJST1IsIHJlc3BvbnNlLmRhdGEuZXJyb3JzKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBjb250ZXh0LmNvbW1pdChQVVJHRV9BVVRIKTsKICAgIH0KICB9LAoKICBbVVBEQVRFX1VTRVJdKGNvbnRleHQsIHBheWxvYWQpIHsKICAgIGNvbnN0IHsKICAgICAgZW1haWwsCiAgICAgIHVzZXJuYW1lLAogICAgICBwYXNzd29yZCwKICAgICAgaW1hZ2UsCiAgICAgIGJpbwogICAgfSA9IHBheWxvYWQ7CiAgICBjb25zdCB1c2VyID0gewogICAgICBlbWFpbCwKICAgICAgdXNlcm5hbWUsCiAgICAgIGJpbywKICAgICAgaW1hZ2UsCiAgICAgIHBhc3N3b3JkOiB1bmRlZmluZWQKICAgIH07CgogICAgaWYgKHBhc3N3b3JkKSB7CiAgICAgIHVzZXIucGFzc3dvcmQgPSBwYXNzd29yZDsKICAgIH0KCiAgICByZXR1cm4gQXBpU2VydmljZS5wdXQoInVzZXIiLCB1c2VyKS50aGVuKCh7CiAgICAgIGRhdGEKICAgIH0pID0+IHsKICAgICAgY29udGV4dC5jb21taXQoU0VUX0FVVEgsIGRhdGEudXNlcik7CiAgICAgIHJldHVybiBkYXRhOwogICAgfSk7CiAgfQoKfTsKY29uc3QgbXV0YXRpb25zID0gewogIFtTRVRfRVJST1JdKHN0YXRlLCBlcnJvcikgewogICAgc3RhdGUuZXJyb3JzID0gZXJyb3I7CiAgfSwKCiAgW1NFVF9BVVRIXShzdGF0ZSwgdXNlcikgewogICAgc3RhdGUuaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTsKICAgIHN0YXRlLnVzZXIgPSB1c2VyOwogICAgc3RhdGUuZXJyb3JzID0ge307CiAgICBKd3RTZXJ2aWNlLnNhdmVUb2tlbihzdGF0ZS51c2VyLnRva2VuKTsKICB9LAoKICBbUFVSR0VfQVVUSF0oc3RhdGUpIHsKICAgIHN0YXRlLmlzQXV0aGVudGljYXRlZCA9IGZhbHNlOwogICAgc3RhdGUudXNlciA9IHt9OwogICAgc3RhdGUuZXJyb3JzID0ge307CiAgICBKd3RTZXJ2aWNlLmRlc3Ryb3lUb2tlbigpOwogIH0KCn07CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZSwKICBhY3Rpb25zLAogIG11dGF0aW9ucywKICBnZXR0ZXJzCn07"},{"version":3,"sources":["/home/vkit3/WebstormProjects/vue-test/node_modules/eslint-loader/index.js??ref--13-0!/home/vkit3/WebstormProjects/vue-test/src/store/auth.module.ts"],"names":[],"mappings":"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","sourcesContent":["import ApiService from \"@/common/api.service\";\nimport JwtService from \"@/common/jwt.service\";\nimport {\n  LOGIN,\n  LOGOUT,\n  REGISTER,\n  CHECK_AUTH,\n  UPDATE_USER\n} from \"./actions.type\";\nimport { SET_AUTH, PURGE_AUTH, SET_ERROR } from \"./mutations.type\";\n\nconst state = {\n  errors: null,\n  user: {},\n  isAuthenticated: !!JwtService.getToken()\n};\n\nconst getters = {\n  currentUser(state) {\n    return state.user;\n  },\n  isAuthenticated(state) {\n    return state.isAuthenticated;\n  }\n};\n\nconst actions = {\n  [LOGIN](context, credentials) {\n    return new Promise((resolve) => {\n      ApiService.post(\"users/login\", { user: credentials })\n        .then(({ data }) => {\n          context.commit(SET_AUTH, data.user);\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response.data.errors);\n        });\n    });\n  },\n  [LOGOUT](context) {\n    context.commit(PURGE_AUTH);\n  },\n  [REGISTER](context, credentials) {\n    return new Promise((resolve, reject) => {\n      ApiService.post(\"users\", { user: credentials })\n        .then(({ data }) => {\n          context.commit(SET_AUTH, data.user);\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response.data.errors);\n          reject(response);\n        });\n    });\n  },\n  [CHECK_AUTH](context) {\n    if (JwtService.getToken()) {\n      return ApiService.get(\"user\")\n        .then(({ data }) => {\n          context.commit(SET_AUTH, data.user);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response.data.errors);\n        });\n    } else {\n      context.commit(PURGE_AUTH);\n    }\n  },\n  [UPDATE_USER](context, payload) {\n    const { email, username, password, image, bio } = payload;\n    const user = {\n      email,\n      username,\n      bio,\n      image,\n      password: undefined\n    };\n    if (password) {\n      user.password = password;\n    }\n\n    return ApiService.put(\"user\", user).then(({ data }) => {\n      context.commit(SET_AUTH, data.user);\n      return data;\n    });\n  }\n};\n\nconst mutations = {\n  [SET_ERROR](state, error) {\n    state.errors = error;\n  },\n  [SET_AUTH](state, user) {\n    state.isAuthenticated = true;\n    state.user = user;\n    state.errors = {};\n    JwtService.saveToken(state.user.token);\n  },\n  [PURGE_AUTH](state) {\n    state.isAuthenticated = false;\n    state.user = {};\n    state.errors = {};\n    JwtService.destroyToken();\n  }\n};\n\nexport default {\n  state,\n  actions,\n  mutations,\n  getters\n};\n"],"sourceRoot":""}]}